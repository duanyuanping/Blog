## XSS
xss跨站脚本攻击，通过向网页中注入非法的html、js脚本等内容，来达到在网页中添加虚假信息、虚假表单骗取信息、获取用户cookie等非法攻击。

- 非持久型xss（链接）  
网页中存在读取链接数据，然后在页面代码里面执行。攻击者在网页访问链接中添加js或者html，诱骗用户访问该链接。  
防范：浏览器会对url中的内容进行处理，以减少一部分攻击；网页确保数据来自服务器；使用参数前先进行转码。

- 持久型xss（存储）  
攻击者将攻击脚本或者html通过网页中的输入框提交到业务服务数据库中，当其他用户拉到这条数据时，网页执行响应内容，从而达到攻击的方式。  
防范：业务中需要对输入框中特殊字符进行转码处理，经过转码后再通过请求发给服务端；服务端将数据入库之前，也需要做转码处理；前端拿到数据进行渲染前进行转码。

### 防范
- csp：规定浏览器某类资源可以请求哪些域名，同时还可以规定当前网页中可以加载哪些浏览器插件，如果当前请求的资源不再白名单中，浏览器将拦截该请求，并进行上报处理。
- 转义字符
- httpOnly cookie：cookie在写入浏览器的时候，设置httpOnly属性，这样js脚本就没办法拿到cookie了。

## CSRF
csrf跨站请求伪造，攻击者诱导用户进入自己的网站，黑客网站使用用户的登录状态发起跨站请求。

用户完成一下两个步骤：
- 用户在A网站登录
- 用户在不登出A网站的情况下，访问有问题的B网站
![](https://segmentfault.com/img/remote/1460000022842878)

这里B网站(b.com)因为浏览器同源拿不到A网站(a.com)的cookie，但是B网站请求A接口时，此时A网站域名中的用户登录cookie也会一并被到A网站服务，A服务判断用户处于登录状态，对请求放行，从而对用户造成损害。

防范手段：
- 服务端判断请求来源，限制跨域或者配置信任域名
- cookie设置SameSite属性，控制浏览器发起请求的时候是否带上cookie。
  - Strict：A网站请求A服务，会带上cookie；B网站请求A服务，不会带cookie
  - Lax：A网站请求A服务，会带上cookie；B网站get请求A服务，会带上cookie，B网站post、image、iframe请求A服务，不会带上cookie
  - None：任何情况下都会带上cookie
- csrf token：A服务生成一个token存放到A网站（localstorage），A网站后续请求A服务的时候，通过js获取csrf token，并写入请求，然后A服务校验token是否合法。B网站没办法拿到csrf token，B网站直接请求A服务的时候，没有token，服务端拒绝请求。

[Web安全之CSRF实例解析](https://segmentfault.com/a/1190000022842875)

## SQL注入
攻击者利用sql注入，修改服务数据库。

防范手段：
- 限制当前服务用户数据库操作权限
- 将进库数据中的特殊字符进行转义
- 使用数据库提供的参数来操作数据库，避免直接使用sql对数据库进行操作
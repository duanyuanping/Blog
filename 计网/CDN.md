![](https://res-static.hc-cdn.cn/SEO/CDN%E8%8A%82%E7%82%B9%E6%97%A0%E7%BC%93%E5%AD%98%E5%9C%BA%E6%99%AF.jpg)
- 客户端通过www.example.com请求资源，向本地dns服务发起域名解析
- 域名解析请求被发到通用dns服务器
- 通用dns服务器发现当前域名CNAME到www.example.com.c.cdnhwc1.com
- 本地dns服务请求通用dns服务返回的CNAME的域名
- cdn的dns服务器按照条件选出用户最快拿到资源的服务器ip
  - 筛选条件：离用户的距离、资源服务器的负载、有无缓存等
- 客户端拿到资源对应的ip地址后，向cdn资源服务器发起请求
- cdn资源服务器将对应数据返回

其中cdn资源服务器会校验本地是否存在用户请求的资源，如果不存在，就会请求上层资源缓存服务器，直到获取获取到资源；如果存在，就直接将本地的资源返回给用户。

cdn资源服务器资源更新方式：
- push：当前源站服务器资源发生改变了，将新的内容推送给cdn
- pull：当用户请求来到cdn，cdn服务器发现本地没有该资源，就去源站拉取该资源，然后在cdn上面缓存